workflow:
  as: addons-and-operators-aws-ipi
  steps:
    allow_best_effort_post_steps: true
    env:
      COMPUTE_NODE_REPLICAS: "6"
    post:
    - ref: operator-uninstall
    - ref: addon-uninstall
    - chain: ipi-aws-post
    pre:
    - chain: ipi-aws-pre
    - ref: addon-install
    - ref: operator-install
  documentation: |-
    This workflow provision an OpenShift cluster with a default configuration on AWS. 
    The cluster is set with telemetry step generates a "${SHARED_DIR}/manifest_cluster-monitoring-config.yaml" manifest, and 
    generates the AWS-specific install-config.yaml contents based on the cluster profile, located in "${SHARED_DIR}/install-config.yaml".
    It then install required addons and operators on the cluster.
    After finish testing, the addons will be deleted and cluster will be deprovisioned.
