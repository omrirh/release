workflow:
  as: addons-and-operators-aws-ipi
  steps:
    allow_best_effort_post_steps: true
    env:
      S3_BUCKET_NAME: openshift-cli-installer
      S3_BUCKET_PATH: openshift-ci
      API_HOST: stage
      PARALLEL: "true"
      FIREWATCH_JIRA_SERVER: https://issues.redhat.com
    post:
    - ref: cluster-uninstall
    -  ref : firewatch-report-issues
    pre:
    - ref: cluster-install
    - ref: addon-install
    - ref: operator-install
  documentation: |-
    This workflow provisions/de-provisions an OpenShift IPI cluster based on the provided
    cluster config as an environment variable (see cluster-install step for more information)
    as well as installing addons and operators on the target cluster based on the provided addons and operators
    config as environment variables (see addon-install and operator-install steps for more information).
    Cluster data will be available under $SHARED_DIR after setup.
