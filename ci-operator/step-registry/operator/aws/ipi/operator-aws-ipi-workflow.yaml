workflow:
  as: operator-aws-ipi
  steps:
    allow_best_effort_post_steps: true
    env:
      COMPUTE_NODE_REPLICAS: "2"
      COMPUTE_NODE_TYPE: "m5.4xlarge"
      PARALLEL: "true"
    post:
    - ref: osd-ccs-cluster-deprovision
    pre:
    - ref: osd-ccs-cluster-provision-aws
    - ref: osd-ccs-conf-machine-pool
    - ref: osd-ccs-conf-idp-htpasswd
    - ref: osd-ccs-conf-idp-htpasswd-multi-users
    - ref: osd-ccs-cluster-operators-wait-ready
    - ref: operator-install
  documentation: |-
    This workflow provision an OpenShift cluster with a default configuration on AWS. 
    The cluster is set with telemetry step generates a "${SHARED_DIR}/manifest_cluster-monitoring-config.yaml" manifest, and 
    generates the AWS-specific install-config.yaml contents based on the cluster profile, located in "${SHARED_DIR}/install-config.yaml".
    It then install required operator on the cluster.
    After finish testing, the operator will be deleted and cluster will be deprovisioned.
